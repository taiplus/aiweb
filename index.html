<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Future 2026 - 終極安全系統</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Rajdhani:wght@400;500;600;700&family=Noto+Sans+TC:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <style>
        /* === CẤU HÌNH CHUNG === */
        :root { --text-color: #f1f5f9; --neon-blue: #00f3ff; --neon-green: #00ff9d; --neon-purple: #bd00ff; --dark-bg: #000000; }
        * { margin: 0; padding: 0; box-sizing: border-box; scroll-behavior: smooth; }
        body { color: var(--text-color); font-family: 'Noto Sans TC', 'Rajdhani', sans-serif; font-size: 18px; overflow-x: hidden; background-color: #000; line-height: 1.8; }
        body.locked { overflow: hidden; height: 100vh; }

        /* === MÀN HÌNH CHỜ === */
        #lock-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #000; z-index: 99999; display: flex; flex-direction: column; justify-content: center; align-items: center; transition: opacity 1s ease, transform 1s ease; }
        #matrix-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0.6; }
        .radar-ring { position: absolute; width: 650px; height: 650px; border: 1px dashed rgba(0, 243, 255, 0.2); border-radius: 50%; animation: spinRight 60s linear infinite; z-index: 0; }
        .radar-ring::before { content: ''; position: absolute; top: 5%; left: 5%; width: 90%; height: 90%; border: 1px solid rgba(0, 243, 255, 0.1); border-radius: 50%; border-top-color: var(--neon-blue); animation: spinLeft 30s linear infinite; }
        @keyframes spinRight { 100% { transform: rotate(360deg); } } @keyframes spinLeft { 100% { transform: rotate(-360deg); } }
        .scanner-box { position: relative; width: 300px; height: 400px; background: rgba(0, 10, 20, 0.8); border: 1px solid rgba(0, 243, 255, 0.3); box-shadow: 0 0 30px rgba(0, 0, 0, 0.8); backdrop-filter: blur(5px); z-index: 10; overflow: hidden; padding: 5px; }
        .corner { position: absolute; width: 30px; height: 30px; border: 3px solid var(--neon-blue); transition: 0.3s; z-index: 20; }
        .c-tl { top: 0; left: 0; border-right: 0; border-bottom: 0; } .c-tr { top: 0; right: 0; border-left: 0; border-bottom: 0; } .c-bl { bottom: 0; left: 0; border-right: 0; border-top: 0; } .c-br { bottom: 0; right: 0; border-left: 0; border-top: 0; }
        .user-photo { position: absolute; top: 5px; left: 5px; width: calc(100% - 10px); height: calc(100% - 10px); object-fit: cover; opacity: 0; transform: scale(0.9); filter: grayscale(100%) sepia(20%) hue-rotate(180deg); transition: 0.5s; z-index: 5; }
        .user-photo.active { opacity: 1; transform: scale(1); }
        .scan-laser { position: absolute; top: 0; left: 0; width: 100%; height: 2px; background: #fff; box-shadow: 0 0 10px var(--neon-blue), 0 0 20px var(--neon-blue); opacity: 0; z-index: 25; }
        .lock-controls { margin-top: 40px; text-align: center; z-index: 20; display: flex; flex-direction: column; align-items: center; gap: 15px; }
        .status-badge { font-family: 'Share Tech Mono'; color: var(--neon-blue); border: 1px solid var(--neon-blue); padding: 5px 20px; font-size: 16px; letter-spacing: 2px; text-transform: uppercase; background: rgba(0, 243, 255, 0.1); width: 300px; }
        .big-scan-btn { background: transparent; color: #fff; font-family: 'Orbitron', 'Noto Sans TC'; font-size: 1.2rem; font-weight: bold; padding: 12px 40px; border: 1px solid var(--neon-blue); cursor: pointer; text-transform: uppercase; letter-spacing: 3px; transition: 0.3s; box-shadow: 0 0 20px rgba(0, 243, 255, 0.1); }
        .big-scan-btn:hover { background: var(--neon-blue); color: #000; box-shadow: 0 0 40px var(--neon-blue); }
        .scanning .scan-laser { opacity: 1; animation: scanDown 1.5s ease-in-out infinite; } .scanning .user-photo { filter: grayscale(100%) brightness(1.1) contrast(1.1); }
        .granted .scanner-box { border-color: var(--neon-green); box-shadow: 0 0 50px rgba(0, 255, 157, 0.3); } .granted .corner { border-color: var(--neon-green); width: 100%; height: 100%; border-width: 2px; } .granted .status-badge { color: var(--neon-green); border-color: var(--neon-green); background: rgba(0, 255, 157, 0.1); } .granted .user-photo { filter: none; } .granted .scan-laser { display: none; }
        @keyframes scanDown { 0% { top: 0; opacity: 0; } 10% { opacity: 1; } 90% { opacity: 1; } 100% { top: 100%; opacity: 0; } }

        /* === NAV & HUD === */
        nav { position: absolute; top: 0; left: 0; width: 100%; height: 80px; padding: 0 40px; display: flex; justify-content: space-between; align-items: center; background: rgba(5, 5, 8, 0.7); backdrop-filter: blur(5px); z-index: 1000; border-bottom: 1px solid rgba(255, 255, 255, 0.05); transition: transform 0.8s ease-in-out; }
        body.locked nav { transform: translateY(-100%); }
        #hud-display { position: absolute; top: 40px; left: 50%; transform: translate(-50%, -50%); z-index: 1002; width: 650px; height: 50px; display: flex; justify-content: space-between; align-items: center; padding: 0 25px; background: linear-gradient(90deg, rgba(0,0,0,0.8) 0%, rgba(0, 24, 50, 0.9) 20%, rgba(0, 24, 50, 0.9) 80%, rgba(0,0,0,0.8) 100%); border: 1px solid var(--neon-blue); box-shadow: 0 0 15px rgba(0, 243, 255, 0.2); clip-path: polygon(10px 0, 100% 0, 100% 100%, 0 100%, 0 10px); transition: transform 0.8s ease-in-out; }
        body.locked #hud-display { transform: translate(-50%, -200px); }
        .hud-time { font-family: 'Orbitron'; font-weight: 700; color: #fff; text-shadow: 0 0 15px var(--neon-blue); font-size: 1.5rem; } .hud-details { display: flex; gap: 20px; font-size: 1rem; color: #ccc; align-items: center; }
        .scan-line { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.1) 50%, transparent 100%); animation: scanningHUD 4s linear infinite; pointer-events: none; }
        @keyframes scanningHUD { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
        .logo { font-family: 'Orbitron'; font-weight: 900; font-size: 24px; color: #fff; z-index: 1003; } .logo span { color: var(--neon-blue); } .nav-links a { color: rgba(255,255,255,0.7); text-decoration: none; margin-left: 30px; font-weight: 600; text-transform: uppercase; font-size: 14px; transition: 0.3s; }
        .hero { height: 100vh; width: 100%; position: relative; overflow: hidden; background: #000; } #canvas-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; } .hero-overlay { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 10; text-align: center; width: 100%; } .hero h1 { font-family: 'Orbitron', 'Noto Sans TC'; font-size: clamp(3rem, 6vw, 6rem); font-weight: 900; color: #fff; letter-spacing: 5px; margin-bottom: 20px; opacity: 0; transition: opacity 1.5s 0.5s; } body:not(.locked) .hero h1 { opacity: 1; }

        /* === CONTENT BLOCKS === */
        section.content-block { min-height: 100vh; padding: 120px 5%; display: flex; align-items: center; } .container { display: flex; align-items: flex-start; gap: 60px; max-width: 1600px; width: 100%; margin: 0 auto; z-index: 2; } section.content-block:nth-child(even) .container { flex-direction: row-reverse; }
        #xe { background: linear-gradient(to bottom, #000 0%, #0f172a 100%); } #xe .accent { color: #38bdf8; } #yte { background: linear-gradient(to bottom, #0f172a 0%, #0f393b 100%); } #yte .accent { color: #2dd4bf; } #nlp { background: linear-gradient(to bottom, #0f393b 0%, #3b0764 100%); } #nlp .accent { color: #e879f9; } #fin { background: linear-gradient(to bottom, #3b0764 0%, #1e1b4b 100%); } #fin .accent { color: #facc15; } #agri { background: linear-gradient(to bottom, #1e1b4b 0%, #064e3b 100%); } #agri .accent { color: #4ade80; }
        .text-box { flex: 1.2; opacity: 0; transform: translateY(30px); transition: 0.8s ease-out; } .text-box h2 { font-family: 'Orbitron', 'Noto Sans TC'; font-size: 2.8rem; color: #fff; margin-bottom: 25px; display: flex; align-items: center; gap: 15px; text-transform: uppercase; } .main-desc { font-size: 1.3rem; font-weight: 600; margin-bottom: 25px; color: #fff; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 15px; } .detail-content h3 { font-family: 'Orbitron', 'Noto Sans TC'; font-size: 1.2rem; margin: 25px 0 10px 0; color: rgba(255,255,255,0.9); text-transform: uppercase; letter-spacing: 1px; border-left: 4px solid var(--neon-blue); padding-left: 12px; } .detail-content p { font-size: 1.1rem; color: rgba(255,255,255,0.85); margin-bottom: 15px; text-align: justify; line-height: 1.8; }
        .gallery-box { flex: 0.8; opacity: 0; transform: scale(0.95); transition: 0.8s ease-out; position: sticky; top: 120px; } .main-img { width: 100%; height: 400px; object-fit: cover; border-radius: 12px; margin-bottom: 20px; border: 2px solid rgba(255,255,255,0.1); box-shadow: 0 20px 50px rgba(0,0,0,0.5); } .sub-imgs-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; } .sub-img { width: 100%; height: 180px; object-fit: cover; border-radius: 8px; filter: brightness(0.7); transition: 0.3s; border: 1px solid rgba(255,255,255,0.1); }
        .video-btn { display: inline-flex; align-items: center; gap: 10px; margin-top: 25px; padding: 15px 30px; background: rgba(255,255,255,0.1); color: #fff; border: 1px solid var(--neon-blue); border-radius: 50px; font-family: 'Orbitron', 'Noto Sans TC'; font-size: 1rem; cursor: pointer; transition: 0.3s; text-transform: uppercase; font-weight: bold; width: 100%; justify-content: center; } .video-btn:hover { background: var(--neon-blue); color: #000; box-shadow: 0 0 25px var(--neon-blue); }
        #video-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 9999; display: none; justify-content: center; align-items: center; opacity: 0; transition: opacity 0.5s; backdrop-filter: blur(10px); } #video-modal.active { display: flex; opacity: 1; } .modal-container { width: 90vw; height: 90vh; display: flex; flex-direction: column; justify-content: center; align-items: center; position: relative; } video { max-width: 100%; max-height: 80vh; border: 1px solid var(--neon-blue); box-shadow: 0 0 40px rgba(0, 243, 255, 0.2); background: #000; object-fit: contain; } .close-modal { position: absolute; top: 20px; right: 20px; z-index: 10; color: #fff; font-size: 20px; cursor: pointer; font-family: 'Orbitron', 'Noto Sans TC'; background: rgba(0,0,0,0.5); padding: 10px 20px; border: 1px solid #fff; border-radius: 30px; }
        section.active .text-box { opacity: 1; transform: translateY(0); } section.active .gallery-box { opacity: 1; transform: scale(1); }

        /* === FOOTER & PHÁO HOA === */
        footer { background: linear-gradient(to top, #000 0%, #064e3b 100%); padding: 80px 20px; text-align: center; border-top: 2px solid var(--neon-green); position: relative; }
        .footer-content h3 { font-family: 'Orbitron', 'Noto Sans TC'; font-size: 2rem; color: #fff; margin-bottom: 30px; letter-spacing: 5px; }
        .footer-info { display: flex; flex-direction: column; gap: 15px; margin-bottom: 40px; font-size: 1.1rem; color: rgba(255,255,255,0.8); }
        .footer-info i { color: var(--neon-green); margin-right: 10px; width: 25px; }
        .finish-btn { background: transparent; color: var(--neon-green); font-family: 'Orbitron', 'Noto Sans TC'; padding: 15px 50px; font-size: 1.2rem; border: 2px solid var(--neon-green); cursor: pointer; text-transform: uppercase; letter-spacing: 3px; transition: 0.3s; margin-top: 20px; position: relative; overflow: hidden; font-weight: 900; }
        .finish-btn:hover { background: var(--neon-green); color: #000; box-shadow: 0 0 50px var(--neon-green); }
        #fireworks-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 99999; display: none; cursor: pointer; }
        #stop-hint { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); color: #fff; font-family: 'Orbitron', 'Noto Sans TC'; font-size: 16px; background: rgba(0,0,0,0.7); padding: 10px 20px; border-radius: 20px; border: 1px solid var(--neon-blue); z-index: 100000; display: none; animation: pulse 2s infinite; pointer-events: none; }
        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }
        @media (max-width: 1024px) { .container { flex-direction: column !important; } .gallery-box { position: static; width: 100%; } .text-box { width: 100%; } }
    </style>
</head>
<body class="locked">
    <canvas id="fireworks-canvas"></canvas>
    <div id="stop-hint">點擊螢幕結束</div>
    
    <div id="lock-screen">
        <canvas id="matrix-canvas"></canvas> <div class="radar-ring"></div>
        <div class="scanner-box" id="scanner"><div class="corner c-tl"></div><div class="corner c-tr"></div><div class="corner c-bl"></div><div class="corner c-br"></div><div class="scan-laser"></div><img src="images/Look.jpg" id="img-user-1" class="user-photo" alt="Loi" onerror="this.src='https://via.placeholder.com/300x400?text=阮文利'"><img src="images/Lookk.jpg" id="img-user-2" class="user-photo" alt="Tai" onerror="this.src='https://via.placeholder.com/300x400?text=何文才'"></div>
        <div class="lock-controls"><div class="status-badge" id="scan-status">系統鎖定</div><button class="big-scan-btn" id="btn-scan" onclick="startDualScanSequence()"><i class="fas fa-fingerprint"></i> 啟動</button></div>
    </div>
    <div id="video-modal"><div class="modal-container"><div class="close-modal" onclick="closeVideo()"><i class="fas fa-times"></i> 關閉</div><div id="video-placeholder" style="width:100%; height:100%; display:flex; justify-content:center; align-items:center;"></div><div id="video-title" style="margin-top:15px; font-family:'Orbitron', 'Noto Sans TC'; color:var(--neon-blue);"></div></div></div>
    
    <nav><div class="logo"><i class="fas fa-cube"></i> AI.<span>CORE</span></div><div class="nav-links"><a href="#xe">自動駕駛</a><a href="#yte">醫療</a><a href="#nlp">NLP</a><a href="#fin">金融</a><a href="#agri">農業</a></div></nav>
    <div id="hud-display"><div class="scan-line"></div><div class="hud-time" id="hud-time">00:00:00</div><div class="hud-details"><span id="hud-date">Loading...</span><span style="color:#555">|</span><span id="hud-weather" style="color: #4ade80;"><i class="fas fa-satellite-dish fa-spin"></i> Connecting...</span></div></div>
    
    <section class="hero" id="hero-section"><div id="canvas-container"></div><div class="hero-overlay"><h1>AI NEXUS 2026</h1><p style="color:var(--neon-blue); letter-spacing:3px;">全面數位化時代</p></div></section>

    <section id="xe" class="content-block"><div class="container"><div class="text-box"><h2 class="accent"><i class="fas fa-car"></i> 1. 無人駕駛與智慧交通</h2><p class="main-desc">未來，您不再擁有汽車，而是購買「移動服務」。汽車將失去方向盤，變成移動的客廳。</p><div class="detail-content"><h3>感測器融合技術</h3><p>Level 5 無人駕駛不依賴單一感官。它使用 LiDAR 進行毫米級精度的即時 3D 地圖掃描，Radar 穿透霧雨，以及 AI 攝影機識別標誌。中央 AI 系統整合這些數據，決策速度比人腦快 100 倍。</p><h3>V2X 車聯網通訊</h3><p>500公尺外緊急煞車的車輛會立即發送警告訊號給您的車。車輛與交通號誌通訊以優化「綠波」，減少紅燈等待時間並降低城市擁堵達 40%。</p></div><button class="video-btn" onclick="openVideo('xe')"><i class="fas fa-play-circle"></i> 觀看演示 (11.mp4)</button></div><div class="gallery-box"><img src="images/1.jpg" class="main-img"><div class="sub-imgs-grid"><img src="images/2.jpg" class="sub-img"><img src="images/3.jpg" class="sub-img"></div></div></div></section>
    
    <section id="yte" class="content-block"><div class="container"><div class="text-box"><h2 class="accent"><i class="fas fa-user-md"></i> 2. 精準醫療與生物科技</h2><p class="main-desc">從「生病才治療」轉變為「預測並在萌芽階段預防疾病」。</p><div class="detail-content"><h3>蛋白質與基因解碼</h3><p>AI 已解決 50 年來的生物學難題：預測 2 億種蛋白質結構。這使得為個人設計特效藥 (Personalized Medicine) 僅需數天。AI 輔助的 CRISPR 技術有助於精確切除遺傳性癌症基因。</p><h3>奈米醫生</h3><p>想像數百萬個奈米機器人 (Nanobots) 在您的血管中巡邏，一旦發現癌細胞立即消滅。穿戴式設備不僅測量心率，還能透過大數據分析提前 48 小時預測中風。</p></div><button class="video-btn" onclick="openVideo('yte')"><i class="fas fa-play-circle"></i> 觀看演示 (33.mp4)</button></div><div class="gallery-box"><img src="images/4.jpg" class="main-img"><div class="sub-imgs-grid"><img src="images/5.jpg" class="sub-img"><img src="images/6.jpg" class="sub-img"></div></div></div></section>
    
    <section id="nlp" class="content-block"><div class="container"><div class="text-box"><h2 class="accent"><i class="fas fa-brain"></i> 3. 通用人工智慧 (AGI)</h2><p class="main-desc">當機器不僅會「計算」，還懂得「思考」、「創造」並擁有實體。</p><div class="detail-content"><h3>超大型語言模型 (LLMs)</h3><p>GPT-5 或 Gemini Ultra 不再只是聊天機器人。它們是包含人類知識的巨大核心，能夠編程、寫作、作曲並進行多步驟邏輯推理。</p><h3>人形機器人</h3><p>人工智慧需要身體。演示影片中的人形機器人 (Humanoid) 擁有靈活的動力關節，可以代替人類進入危險環境或在家中照顧老人。</p></div><button class="video-btn" onclick="openVideo('nlp')"><i class="fas fa-play-circle"></i> 觀看演示 (22.mp4)</button></div><div class="gallery-box"><img src="https://images.unsplash.com/photo-1620712943543-bcc4688e7485?auto=format&fit=crop&w=1200&q=80" class="main-img"><div class="sub-imgs-grid"><img src="https://images.unsplash.com/photo-1555949963-aa79dcee981c?auto=format&fit=crop&w=800&q=80" class="sub-img"><img src="https://images.unsplash.com/photo-1518770660439-4636190af475?auto=format&fit=crop&w=800&q=80" class="sub-img"></div></div></div></section>
    
    <section id="fin" class="content-block"><div class="container"><div class="text-box"><h2 class="accent"><i class="fas fa-coins"></i> 4. 去中心化金融 (DeFi)</h2><p class="main-desc">中介金融機構的崩潰。區塊鏈帶來的絕對透明時代。</p><div class="detail-content"><h3>智慧合約</h3><p>一段自動執行協議的代碼：「如果 A 轉帳，B 將獲得房屋所有權」。無需律師，無需銀行。</p><h3>高頻交易</h3><p>AI 在毫秒內分析數十億個市場數據點進行交易。機器人顧問使投資民主化，為小額資本提供華爾街級的資產管理策略。</p></div><button class="video-btn" onclick="alert('演示正在更新中')"><i class="fas fa-play-circle"></i> 觀看演示</button></div><div class="gallery-box"><img src="https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?auto=format&fit=crop&w=1200&q=80" class="main-img"><div class="sub-imgs-grid"><img src="https://images.unsplash.com/photo-1563013544-824ae1b704d3?auto=format&fit=crop&w=800&q=80" class="sub-img"><img src="https://images.unsplash.com/photo-1518546305927-5a555bb7020d?auto=format&fit=crop&w=800&q=80" class="sub-img"></div></div></div></section>
    
    <section id="agri" class="content-block"><div class="container"><div class="text-box"><h2 class="accent"><i class="fas fa-leaf"></i> 5. 智慧農業與糧食安全</h2><p class="main-desc">面對 2050 年全球 100 億人口的糧食危機，答案在於「大數據」與「合成生物學」的完美結合。</p><div class="detail-content"><h3>精準農業 (Precision Farming)</h3><p>農業無人機隊全天候巡邏農田，利用多光譜攝影機分析每一株植物的健康狀況。智慧感測器網絡監測土壤濕度與養分，自動化滴灌系統精確地將水和肥料輸送到根部，減少 90% 的水資源浪費並提高 30% 的產量。</p><h3>垂直農場與人造肉</h3><p>將農業帶入市中心，摩天大樓變身為垂直農場，透過 AI 控制的光譜 (LED) 與水培系統全年無休地生產有機蔬菜。同時，實驗室培育的肉類 (Lab-grown meat) 正在取代傳統畜牧業，大幅減少碳排放。</p></div><button class="video-btn" onclick="openVideo('agri')"><i class="fas fa-play-circle"></i> 觀看演示 (44.mp4)</button></div><div class="gallery-box"><img src="images/7.jpg" class="main-img"><div class="sub-imgs-grid"><img src="images/8.jpg" class="sub-img"><img src="images/9.jpg" class="sub-img"></div></div></div></section>

    <footer>
        <div class="footer-content">
            <h3>聯絡資訊與版權</h3>
            <div class="footer-info">
                <p><i class="fas fa-phone"></i> 服務專線: +886 912 345 678 (Auto-System)</p>
                <p><i class="fas fa-map-marker-alt"></i> 地點: 台灣新北市泰山區</p>
                <p><i class="fas fa-copyright"></i> 2026 AI FUTURE. Designed by 阮文利 & 何文才. All Rights Reserved.</p>
            </div>
            <button class="finish-btn" onclick="finishAndCelebrate()">結束旅程 <i class="fas fa-rocket"></i></button>
        </div>
    </footer>

    <script>
        // --- 1. MATRIX ---
        const canvas = document.getElementById('matrix-canvas'); const ctx = canvas.getContext('2d'); canvas.width = window.innerWidth; canvas.height = window.innerHeight; const katakana = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ'; const characters = katakana.split(''); const fontSize = 12; const columns = canvas.width / fontSize; const drops = []; for (let x = 0; x < columns; x++) drops[x] = 1; function drawMatrix() { ctx.fillStyle = 'rgba(0, 0, 0, 0.05)'; ctx.fillRect(0, 0, canvas.width, canvas.height); ctx.fillStyle = '#00f3ff'; ctx.font = fontSize + 'px monospace'; for (let i = 0; i < drops.length; i++) { const text = characters[Math.floor(Math.random() * characters.length)]; ctx.fillText(text, i * fontSize, drops[i] * fontSize); if (drops[i] * fontSize > canvas.height && Math.random() > 0.985) drops[i] = 0; drops[i]++; } } let matrixInterval = setInterval(drawMatrix, 60); window.addEventListener('resize', () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; });
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playBeep(f, t, d) { if (audioCtx.state === 'suspended') audioCtx.resume(); const osc = audioCtx.createOscillator(); const gain = audioCtx.createGain(); osc.type = t; osc.frequency.value = f; osc.connect(gain); gain.connect(audioCtx.destination); osc.start(); gain.gain.exponentialRampToValueAtTime(0.00001, audioCtx.currentTime + d); osc.stop(audioCtx.currentTime + d); }

        // --- 2. DUAL SCAN ---
        function startDualScanSequence() { const btn = document.getElementById('btn-scan'); const status = document.getElementById('scan-status'); const lockScreen = document.getElementById('lock-screen'); const img1 = document.getElementById('img-user-1'); const img2 = document.getElementById('img-user-2'); btn.style.opacity = '0'; status.innerText = "正在初始化生物識別..."; setTimeout(() => { img1.classList.add('active'); status.innerText = "正在檢測：阮文利 (NGUYỄN VĂN LỢI)"; setTimeout(() => { lockScreen.classList.add('scanning'); let s1 = setInterval(() => playBeep(1000+Math.random()*500, 'sawtooth', 0.05), 100); setTimeout(() => { lockScreen.classList.remove('scanning'); clearInterval(s1); playBeep(600, 'sine', 0.2); status.innerText = "正在驗證第二把金鑰..."; img1.classList.remove('active'); setTimeout(() => { img2.classList.add('active'); status.innerText = "正在檢測：何文才 (HÀ VĂN TÀI)"; setTimeout(() => { lockScreen.classList.add('scanning'); let s2 = setInterval(() => playBeep(1000+Math.random()*500, 'sawtooth', 0.05), 100); setTimeout(() => { lockScreen.classList.remove('scanning'); clearInterval(s2); lockScreen.classList.add('granted'); status.innerText = "訪問被允許。歡迎。"; setTimeout(() => playBeep(400, 'sine', 0.1), 0); setTimeout(() => playBeep(800, 'sine', 0.4), 150); setTimeout(() => { clearInterval(matrixInterval); lockScreen.style.opacity = '0'; lockScreen.style.transform = 'scale(1.2)'; document.body.classList.remove('locked'); setTimeout(() => { lockScreen.style.display = 'none'; }, 1000); }, 1500); }, 3000); }, 500); }, 500); }, 3000); }, 800); }, 500); }

        // --- 3. COMMON SCRIPTS ---
        function updateTime() { const now = new Date(); document.getElementById('hud-time').innerText = now.toLocaleTimeString('zh-TW', { hour12: false }); document.getElementById('hud-date').innerHTML = `<i class="far fa-calendar-alt"></i> ${now.getFullYear()}/${now.getMonth()+1}/${now.getDate()}`; } setInterval(updateTime, 1000); updateTime();
        async function fetchWeather() { const w = document.getElementById('hud-weather'); try { const res = await fetch('https://api.open-meteo.com/v1/forecast?latitude=25.06&longitude=121.43&current_weather=true'); const d = await res.json(); if (d.current_weather) w.innerHTML = `<i class="fas fa-cloud-sun"></i> ${d.current_weather.temperature}°C - 泰山 (TAISHAN)`; } catch (e) { w.innerHTML = `<i class="fas fa-sun"></i> 26°C - 台灣`; } } fetchWeather();
        const videoModal = document.getElementById('video-modal'); const videoPlaceholder = document.getElementById('video-placeholder'); const videoTitle = document.getElementById('video-title'); function openVideo(t) { let s="",ti=""; if(t==='xe'){s="11.mp4";ti="AUTO: 無人駕駛";}else if(t==='nlp'){s="22.mp4";ti="AI: 機器人技術";}else if(t==='yte'){s="33.mp4";ti="MED: 精準醫療";}else if(t==='agri'){s="44.mp4";ti="AGRI: 高科技農業";} if(s){videoPlaceholder.innerHTML=`<video controls autoplay style="width:100%; height:100%; object-fit:contain;"><source src="${s}" type="video/mp4"></video>`;videoTitle.innerText=ti;videoModal.classList.add('active');} } function closeVideo(){videoModal.classList.remove('active');videoPlaceholder.innerHTML="";} videoModal.addEventListener('click',(e)=>{if(e.target===videoModal)closeVideo();});
        const container = document.getElementById('canvas-container'); const scene = new THREE.Scene(); const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000); camera.position.z = 2.4; const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true }); renderer.setSize(window.innerWidth, window.innerHeight); container.appendChild(renderer.domElement); const earth = new THREE.Mesh(new THREE.SphereGeometry(1, 64, 64), new THREE.MeshPhongMaterial({ map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/earth_atmos_2048.jpg'), shininess: 15 })); scene.add(earth); const moon = new THREE.Mesh(new THREE.SphereGeometry(0.27, 32, 32), new THREE.MeshPhongMaterial({ map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/moon_1024.jpg'), shininess: 5 })); scene.add(moon); const stars = new THREE.Points(new THREE.BufferGeometry().setAttribute('position', new THREE.Float32BufferAttribute(Array(9000).fill().map(()=>(Math.random()-0.5)*20), 3)), new THREE.PointsMaterial({color: 0xffffff, size: 0.02})); scene.add(stars); const light = new THREE.DirectionalLight(0xffffff, 1.5); light.position.set(5,3,5); scene.add(light); scene.add(new THREE.AmbientLight(0x404040)); function animate() { requestAnimationFrame(animate); earth.rotation.y += 0.002; stars.rotation.y -= 0.0005; const t = Date.now() * 0.0005; moon.position.set(Math.cos(t)*2.5, 0, Math.sin(t)*2.5); moon.rotation.y += 0.005; renderer.render(scene, camera); } animate(); const observer = new IntersectionObserver((entries) => { entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('active'); }); }, { threshold: 0.2 }); document.querySelectorAll('.content-block').forEach(s => observer.observe(s));

        // === 4. FIREWORKS & DEEP BASS AUDIO ENGINE ===
        const fwCanvas = document.getElementById('fireworks-canvas'); 
        const fwCtx = fwCanvas.getContext('2d'); 
        const stopHint = document.getElementById('stop-hint');
        let fireworks = [];
        let particles = [];
        let isCelebrating = false;
        let animationFrameId;
        let launchInterval;
        let clapInterval;

        function resizeFw() { fwCanvas.width = window.innerWidth; fwCanvas.height = window.innerHeight; } 
        window.addEventListener('resize', resizeFw); resizeFw();

        const noiseBuffer = audioCtx.createBuffer(1, audioCtx.sampleRate * 2, audioCtx.sampleRate);
        const output = noiseBuffer.getChannelData(0); for (let i = 0; i < noiseBuffer.length; i++) output[i] = Math.random() * 2 - 1;

        // 1. Vỗ tay
        function playCrowdClap() {
            if(!isCelebrating) return;
            const src = audioCtx.createBufferSource(); src.buffer = noiseBuffer;
            const filter = audioCtx.createBiquadFilter(); filter.type = 'highpass'; filter.frequency.value = 1000;
            const gain = audioCtx.createGain();
            gain.gain.setValueAtTime(0.4, audioCtx.currentTime); gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.15);
            src.playbackRate.value = 0.8 + Math.random() * 0.5;
            src.connect(filter).connect(gain).connect(audioCtx.destination); src.start();
        }

        // 2. TIẾNG NỔ TRẦM (SUPER DEEP BASS - 20% Hz)
        function playRealisticBoom() {
            const now = audioCtx.currentTime;

            // LAYER 1: SUPER DEEP BASS (30Hz -> 8Hz)
            const osc = audioCtx.createOscillator();
            const gainOsc = audioCtx.createGain();
            osc.frequency.setValueAtTime(30, now); 
            osc.frequency.exponentialRampToValueAtTime(8, now + 0.5); 
            gainOsc.gain.setValueAtTime(2.5, now);
            gainOsc.gain.exponentialRampToValueAtTime(0.001, now + 0.5);
            osc.connect(gainOsc).connect(audioCtx.destination);
            osc.start(now); osc.stop(now + 0.5);

            // LAYER 2: TIẾNG NỔ ĐANH
            const noise = audioCtx.createBufferSource(); noise.buffer = noiseBuffer;
            const filter = audioCtx.createBiquadFilter(); filter.type = 'lowpass'; filter.frequency.value = 800;
            const gainNoise = audioCtx.createGain();
            gainNoise.gain.setValueAtTime(1.5, now);
            gainNoise.gain.exponentialRampToValueAtTime(0.001, now + 0.3);
            noise.connect(filter).connect(gainNoise).connect(audioCtx.destination);
            noise.start(now); noise.stop(now + 0.3);
        }

        class Firework {
            constructor(sx, sy, tx, ty) {
                this.x = sx; this.y = sy; this.sx = sx; this.sy = sy;
                this.tx = tx; this.ty = ty;
                this.distanceToTarget = Math.sqrt(Math.pow(tx - sx, 2) + Math.pow(ty - sy, 2));
                this.distanceTraveled = 0;
                this.coordinates = []; this.coordinateCount = 3;
                while(this.coordinateCount--) { this.coordinates.push([this.x, this.y]); }
                this.angle = Math.atan2(ty - sy, tx - sx);
                this.speed = 2; this.acceleration = 1.05; this.brightness = 50 + Math.random() * 20;
                this.targetRadius = 1;
            }
            update(index) {
                this.coordinates.pop(); this.coordinates.unshift([this.x, this.y]);
                if(this.targetRadius < 8) this.targetRadius += 0.3; else this.targetRadius = 1;
                this.speed *= this.acceleration;
                const vx = Math.cos(this.angle) * this.speed; const vy = Math.sin(this.angle) * this.speed;
                this.distanceTraveled = Math.sqrt(Math.pow(this.sx - this.x, 2) + Math.pow(this.sy - this.y, 2));
                if(this.distanceTraveled >= this.distanceToTarget) {
                    createParticles(this.tx, this.ty); fireworks.splice(index, 1);
                } else { this.x += vx; this.y += vy; }
            }
            draw() {
                fwCtx.beginPath(); fwCtx.moveTo(this.coordinates[this.coordinates.length - 1][0], this.coordinates[this.coordinates.length - 1][1]);
                fwCtx.lineTo(this.x, this.y); fwCtx.strokeStyle = 'hsl(' + Math.random()*360 + ', 100%, ' + this.brightness + '%)'; fwCtx.stroke();
            }
        }

        class Particle {
            constructor(x, y) {
                this.x = x; this.y = y;
                this.coordinates = []; this.coordinateCount = 5;
                while(this.coordinateCount--) { this.coordinates.push([this.x, this.y]); }
                this.angle = Math.random() * Math.PI * 2;
                this.speed = Math.random() * 35 + 10; 
                this.friction = 0.96; this.gravity = 0.8;
                this.hue = Math.random() * 360; this.brightness = Math.random() * 50 + 50; this.alpha = 1; this.decay = Math.random() * 0.01 + 0.005;
            }
            update(index) {
                this.coordinates.pop(); this.coordinates.unshift([this.x, this.y]);
                this.speed *= this.friction; this.x += Math.cos(this.angle) * this.speed; this.y += Math.sin(this.angle) * this.speed + this.gravity;
                this.alpha -= this.decay; if(this.alpha <= this.decay) { particles.splice(index, 1); }
            }
            draw() {
                fwCtx.beginPath(); fwCtx.moveTo(this.coordinates[this.coordinates.length - 1][0], this.coordinates[this.coordinates.length - 1][1]);
                fwCtx.lineTo(this.x, this.y); fwCtx.strokeStyle = 'hsla(' + this.hue + ', 100%, ' + this.brightness + '%, ' + this.alpha + ')'; fwCtx.stroke();
            }
        }

        function createParticles(x, y) {
            let particleCount = 200; while(particleCount--) { particles.push(new Particle(x, y)); }
            playRealisticBoom(); 
        }

        function loop() {
            if(!isCelebrating) return;
            animationFrameId = requestAnimationFrame(loop);
            fwCtx.globalCompositeOperation = 'destination-out'; fwCtx.fillStyle = 'rgba(0, 0, 0, 0.5)'; fwCtx.fillRect(0, 0, fwCanvas.width, fwCanvas.height);
            fwCtx.globalCompositeOperation = 'lighter';
            let i = fireworks.length; while(i--) { fireworks[i].draw(); fireworks[i].update(i); }
            let j = particles.length; while(j--) { particles[j].draw(); particles[j].update(j); }
        }

        function finishAndCelebrate() {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            isCelebrating = true; fwCanvas.style.display = 'block'; stopHint.style.display = 'block'; fwCanvas.style.pointerEvents = 'auto'; loop(); 

            // Bắn chậm từ từ
            launchInterval = setInterval(() => {
                if(isCelebrating) {
                    const startX = window.innerWidth / 2; const startY = window.innerHeight;
                    const targetX = Math.random() * window.innerWidth; const targetY = Math.random() * (window.innerHeight / 2); 
                    fireworks.push(new Firework(startX, startY, targetX, targetY));
                }
            }, 1000); 

            // Tiếng vỗ tay
            clapInterval = setInterval(() => {
                if(isCelebrating) { playCrowdClap(); setTimeout(playCrowdClap, 20); setTimeout(playCrowdClap, 40); setTimeout(playCrowdClap, 60); setTimeout(playCrowdClap, 80); }
            }, 150);
        }

        function stopCelebration() {
            if(isCelebrating) {
                isCelebrating = false; cancelAnimationFrame(animationFrameId); clearInterval(launchInterval); clearInterval(clapInterval);
                fwCtx.clearRect(0, 0, fwCanvas.width, fwCanvas.height); fwCanvas.style.display = 'none'; stopHint.style.display = 'none'; fwCanvas.style.pointerEvents = 'none'; fireworks = []; particles = [];
            }
        }
        window.addEventListener('click', (e) => { if(isCelebrating && e.target !== document.querySelector('.finish-btn')) { stopCelebration(); } });
    </script>
</body>
</html>